<UserControl x:Class="MS2.DesktopApp.Presentation.Profile.ProfileView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <Border Grid.Row="0" Padding="15">
            <TextBlock Text="THÔNG TIN CÁ NHÂN" 
                       FontSize="20" 
                       FontWeight="Bold"/>
        </Border>

        <!-- Profile Form -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="20" MaxWidth="500">
                
                <!-- Username (Read-only) -->
                <TextBlock Text="Tên đăng nhập:" FontWeight="SemiBold" Margin="0,10,0,5"/>
                <TextBox Text="{Binding Username, Mode=OneWay}" 
                         IsReadOnly="True" 
                         Padding="10" 
                         FontSize="14"/>

                <!-- Role (Read-only) -->
                <TextBlock Text="Vai trò:" FontWeight="SemiBold" Margin="0,10,0,5"/>
                <TextBox Text="{Binding Role, Mode=OneWay}" 
                         IsReadOnly="True" 
                         Padding="10" 
                         FontSize="14"/>

                <!-- Full Name -->
                <TextBlock Text="Họ và tên:" FontWeight="SemiBold" Margin="0,10,0,5"/>
                <TextBox Text="{Binding FullName, UpdateSourceTrigger=PropertyChanged}" 
                         Padding="10" 
                         FontSize="14"/>

                <!-- Email -->
                <TextBlock Text="Email:" FontWeight="SemiBold" Margin="0,10,0,5"/>
                <TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}" 
                         Padding="10" 
                         FontSize="14"/>

                <!-- Phone -->
                <TextBlock Text="Số điện thoại:" FontWeight="SemiBold" Margin="0,10,0,5"/>
                <TextBox Text="{Binding Phone, UpdateSourceTrigger=PropertyChanged}" 
                         Padding="10" 
                         FontSize="14"/>

                <!-- Address -->
                <TextBlock Text="Địa chỉ:" FontWeight="SemiBold" Margin="0,10,0,5"/>
                <TextBox Text="{Binding Address, UpdateSourceTrigger=PropertyChanged}" 
                         Padding="10" 
                         FontSize="14" 
                         Height="60" 
                         TextWrapping="Wrap" 
                         AcceptsReturn="True" 
                         VerticalScrollBarVisibility="Auto"/>

                <!-- Separator -->
                <Separator Margin="0,20"/>

                <!-- Change Password Section -->
                <TextBlock Text="ĐỔI MẬT KHẨU (tùy chọn)" 
                           FontSize="16" 
                           FontWeight="Bold" 
                           Margin="0,10,0,10"/>

                <!-- New Password -->
                <TextBlock Text="Mật khẩu mới:" FontWeight="SemiBold" Margin="0,10,0,5"/>
                <PasswordBox x:Name="NewPasswordBox" 
                             Padding="10" 
                             FontSize="14"
                             PasswordChanged="NewPasswordBox_PasswordChanged"/>

                <!-- Confirm Password -->
                <TextBlock Text="Xác nhận mật khẩu:" FontWeight="SemiBold" Margin="0,10,0,5"/>
                <PasswordBox x:Name="ConfirmPasswordBox" 
                             Padding="10" 
                             FontSize="14"
                             PasswordChanged="ConfirmPasswordBox_PasswordChanged"/>

                <!-- Buttons -->
                <StackPanel Orientation="Horizontal" 
                            HorizontalAlignment="Right" 
                            Margin="0,30,0,0">
                    <Button Content="Hủy" 
                            Command="{Binding ResetFormCommand}"
                            Width="100" 
                            Height="35" 
                            Margin="0,0,10,0"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Cursor="Hand"/>
                    <Button Content="Lưu thay đổi" 
                            Command="{Binding UpdateProfileCommand}"
                            Width="120" 
                            Height="35"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Cursor="Hand"/>
                </StackPanel>

                <!-- Loading Indicator -->
                <ProgressBar IsIndeterminate="True" 
                             Height="3" 
                             Margin="0,20,0,0">
                    <ProgressBar.Style>
                        <Style TargetType="ProgressBar">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsLoading}" Value="True">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </ProgressBar.Style>
                </ProgressBar>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
